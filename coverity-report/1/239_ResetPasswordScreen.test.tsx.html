<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Coverity error reader: /Users/E0661236/Desktop/brightlayer-ui/blui-react/packages/login-workflow/src/screens/ResetPasswordScreen/ResetPasswordScreen.test.tsx</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head>
<body link="#000000" vlink="#000000"><pre>
<b><a name="line1">1    </a></b>	import React, { JSX, act } from 'react';
<b><a name="line2">2    </a></b>	import { BrowserRouter } from 'react-router-dom';
<b><a name="line3">3    </a></b>	import '@testing-library/jest-dom';
<b><a name="line4">4    </a></b>	import { cleanup, render, screen, fireEvent, RenderResult, waitFor } from '@testing-library/react';
<b><a name="line5">5    </a></b>	import { ResetPasswordScreen } from './ResetPasswordScreen';
<b><a name="line6">6    </a></b>	import { AuthContextProvider } from '../../contexts';
<b><a name="line7">7    </a></b>	import { ResetPasswordScreenProps } from './types';
<b><a name="line8">8    </a></b>	import { authContextProviderProps } from '../../testUtils';
<b><a name="line9">9    </a></b>	
<b><a name="line10">10   </a></b>	afterEach(cleanup);
<b><a name="line11">11   </a></b>	
<b><a name="line12">12   </a></b>	describe('Reset Password Screen', () =&gt; {
<b><a name="line13">13   </a></b>	    let mockOnNext: any;
<b><a name="line14">14   </a></b>	    let mockOnPrevious: any;
<b><a name="line15">15   </a></b>	
<b><a name="line16">16   </a></b>	    afterEach(() =&gt; {
<b><a name="line17">17   </a></b>	        jest.clearAllMocks();
<b><a name="line18">18   </a></b>	    });
<b><a name="line19">19   </a></b>	
<b><a name="line20">20   </a></b>	    beforeEach(() =&gt; {
<b><a name="line21">21   </a></b>	        mockOnNext = jest.fn();
<b><a name="line22">22   </a></b>	        mockOnPrevious = jest.fn();
<b><a name="line23">23   </a></b>	    });
<b><a name="line24">24   </a></b>	
<b><a name="line25">25   </a></b>	    const renderer = (props?: ResetPasswordScreenProps): RenderResult =&gt;
<b><a name="line26">26   </a></b>	        render(
<b><a name="line27">27   </a></b>	            &lt;AuthContextProvider {...authContextProviderProps}&gt;
<b><a name="line28">28   </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line29">29   </a></b>	                    &lt;ResetPasswordScreen {...props} /&gt;
<b><a name="line30">30   </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line31">31   </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line32">32   </a></b>	        );
<b><a name="line33">33   </a></b>	
<b><a name="line34">34   </a></b>	    it('renders without crashing', async () =&gt; {
<b><a name="line35">35   </a></b>	        renderer();
<b><a name="line36">36   </a></b>	        await waitFor(() =&gt; expect(screen.getByText('Reset Password')).toBeInTheDocument);
<b><a name="line37">37   </a></b>	    });
<b><a name="line38">38   </a></b>	
<b><a name="line39">39   </a></b>	    it('should update values when passed as props', async () =&gt; {
<b><a name="line40">40   </a></b>	        renderer({ WorkflowCardHeaderProps: { title: 'Test Title' } });
<b><a name="line41">41   </a></b>	        expect(screen.queryByText('Reset Password')).toBeNull();
<b><a name="line42">42   </a></b>	        await waitFor(() =&gt; expect(screen.getByText('Test Title')).toBeInTheDocument);
<b><a name="line43">43   </a></b>	    });
<b><a name="line44">44   </a></b>	
<b><a name="line45">45   </a></b>	    it('should show success screen, when okay button is clicked', async () =&gt; {
<b><a name="line46">46   </a></b>	        const { getByLabelText, getByTestId } = renderer({
<b><a name="line47">47   </a></b>	            PasswordProps: {
<b><a name="line48">48   </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line49">49   </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line50">50   </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line51">51   </a></b>	                passwordRequirements: [],
<b><a name="line52">52   </a></b>	            },
<b><a name="line53">53   </a></b>	            WorkflowCardActionsProps: {
<b><a name="line54">54   </a></b>	                canGoNext: true,
<b><a name="line55">55   </a></b>	                nextLabel: 'Next',
<b><a name="line56">56   </a></b>	            },
<b><a name="line57">57   </a></b>	        });
<b><a name="line58">58   </a></b>	
<b><a name="line59">59   </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line60">60   </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line61">61   </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'Abc@1234' } });
<b><a name="line62">62   </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'Abc@1234' } });
<b><a name="line63">63   </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line64">64   </a></b>	        await waitFor(() =&gt; expect(screen.getByText('Your password was successfully reset.')));
<b><a name="line65">65   </a></b>	        const doneButton = getByTestId('BluiWorkflowCardActions-nextButton');
<b><a name="line66">66   </a></b>	        fireEvent.click(doneButton);
<b><a name="line67">67   </a></b>	    });
<b><a name="line68">68   </a></b>	
<b><a name="line69">69   </a></b>	    it('should call handleNext callback function', () =&gt; {
<b><a name="line70">70   </a></b>	        const { getByLabelText } = renderer({
<b><a name="line71">71   </a></b>	            showSuccessScreen: false,
<b><a name="line72">72   </a></b>	            PasswordProps: {
<b><a name="line73">73   </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line74">74   </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line75">75   </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line76">76   </a></b>	                passwordRequirements: [],
<b><a name="line77">77   </a></b>	            },
<b><a name="line78">78   </a></b>	            WorkflowCardActionsProps: {
<b><a name="line79">79   </a></b>	                canGoNext: true,
<b><a name="line80">80   </a></b>	                nextLabel: 'Next',
<b><a name="line81">81   </a></b>	                onNext: mockOnNext(),
<b><a name="line82">82   </a></b>	            },
<b><a name="line83">83   </a></b>	        });
<b><a name="line84">84   </a></b>	
<b><a name="line85">85   </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line86">86   </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line87">87   </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'Abc@1234' } });
<b><a name="line88">88   </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'Abc@1234' } });
<b><a name="line89">89   </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line90">90   </a></b>	        expect(mockOnNext).toHaveBeenCalled();
<b><a name="line91">91   </a></b>	    });
<b><a name="line92">92   </a></b>	
<b><a name="line93">93   </a></b>	    it('should show loader, when loading prop is passed to WorkflowCardBaseProps', async () =&gt; {
<b><a name="line94">94   </a></b>	        renderer({ WorkflowCardBaseProps: { loading: true } });
<b><a name="line95">95   </a></b>	        await waitFor(() =&gt; expect(screen.getByTestId('blui-spinner')).toBeInTheDocument);
<b><a name="line96">96   </a></b>	    });
<b><a name="line97">97   </a></b>	
<b><a name="line98">98   </a></b>	    it('should call onNext, when Next button clicked', async () =&gt; {
<b><a name="line99">99   </a></b>	        const { getByLabelText } = renderer({
<b><a name="line100">100  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line101">101  </a></b>	                onNext: mockOnNext(),
<b><a name="line102">102  </a></b>	                showNext: true,
<b><a name="line103">103  </a></b>	                nextLabel: 'Next',
<b><a name="line104">104  </a></b>	            },
<b><a name="line105">105  </a></b>	        });
<b><a name="line106">106  </a></b>	        await waitFor(() =&gt; expect(screen.getByText('Reset Password')).toBeInTheDocument);
<b><a name="line107">107  </a></b>	        const passwordField = getByLabelText('New Password');
<b><a name="line108">108  </a></b>	        const confirmPasswordField = getByLabelText('Confirm New Password');
<b><a name="line109">109  </a></b>	        fireEvent.change(passwordField, { target: { value: 'Abcd@123' } });
<b><a name="line110">110  </a></b>	        fireEvent.blur(passwordField);
<b><a name="line111">111  </a></b>	        fireEvent.change(confirmPasswordField, { target: { value: 'Abcd@123' } });
<b><a name="line112">112  </a></b>	        fireEvent.blur(confirmPasswordField);
<b><a name="line113">113  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line114">114  </a></b>	        expect(nextButton).toBeInTheDocument();
<b><a name="line115">115  </a></b>	        await act(async () =&gt; {
<b><a name="line116">116  </a></b>	            expect(await screen.findByText('Next')).toBeEnabled();
<b><a name="line117">117  </a></b>	            fireEvent.click(nextButton);
<b><a name="line118">118  </a></b>	        });
<b><a name="line119">119  </a></b>	        expect(mockOnNext).toHaveBeenCalled();
<b><a name="line120">120  </a></b>	    });
<b><a name="line121">121  </a></b>	
<b><a name="line122">122  </a></b>	    it('should call onPrevious, when Back button clicked', async () =&gt; {
<b><a name="line123">123  </a></b>	        renderer({
<b><a name="line124">124  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line125">125  </a></b>	                onPrevious: mockOnPrevious(),
<b><a name="line126">126  </a></b>	                showPrevious: true,
<b><a name="line127">127  </a></b>	                previousLabel: 'Back',
<b><a name="line128">128  </a></b>	            },
<b><a name="line129">129  </a></b>	        });
<b><a name="line130">130  </a></b>	        await waitFor(() =&gt; expect(screen.getByText('Reset Password')).toBeInTheDocument);
<b><a name="line131">131  </a></b>	
<b><a name="line132">132  </a></b>	        const backButton = screen.getByText('Back');
<b><a name="line133">133  </a></b>	        expect(backButton).toBeInTheDocument();
<b><a name="line134">134  </a></b>	        await act(async () =&gt; {
<b><a name="line135">135  </a></b>	            expect(await screen.findByText('Back')).toBeEnabled();
<b><a name="line136">136  </a></b>	            fireEvent.click(backButton);
<b><a name="line137">137  </a></b>	        });
<b><a name="line138">138  </a></b>	        expect(mockOnPrevious).toHaveBeenCalled();
<b><a name="line139">139  </a></b>	    });
<b><a name="line140">140  </a></b>	
<b><a name="line141">141  </a></b>	    it('should render with custom header props', () =&gt; {
<b><a name="line142">142  </a></b>	        renderer({
<b><a name="line143">143  </a></b>	            WorkflowCardHeaderProps: {
<b><a name="line144">144  </a></b>	                title: 'Custom Reset Title',
<b><a name="line145">145  </a></b>	            },
<b><a name="line146">146  </a></b>	        });
<b><a name="line147">147  </a></b>	        // await waitFor(() =&gt; expect(screen.getByText('Custom Reset Title')).toBeInTheDocument());
<b><a name="line148">148  </a></b>	        expect(screen.getByText('Custom Reset Title')).toBeInTheDocument();
<b><a name="line149">149  </a></b>	    });
<b><a name="line150">150  </a></b>	
<b><a name="line151">151  </a></b>	    it('should render with custom instruction props', () =&gt; {
<b><a name="line152">152  </a></b>	        renderer({
<b><a name="line153">153  </a></b>	            WorkflowCardInstructionProps: {
<b><a name="line154">154  </a></b>	                instructions: 'Custom password reset instructions',
<b><a name="line155">155  </a></b>	            },
<b><a name="line156">156  </a></b>	        });
<b><a name="line157">157  </a></b>	        expect(screen.getByText('Custom password reset instructions')).toBeInTheDocument();
<b><a name="line158">158  </a></b>	    });
<b><a name="line159">159  </a></b>	
<b><a name="line160">160  </a></b>	    it('should handle PasswordProps onPasswordChange callback', () =&gt; {
<b><a name="line161">161  </a></b>	        const mockOnPasswordChange = jest.fn();
<b><a name="line162">162  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line163">163  </a></b>	            PasswordProps: {
<b><a name="line164">164  </a></b>	                onPasswordChange: mockOnPasswordChange,
<b><a name="line165">165  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line166">166  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line167">167  </a></b>	            },
<b><a name="line168">168  </a></b>	        });
<b><a name="line169">169  </a></b>	
<b><a name="line170">170  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line171">171  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'TestPass123!' } });
<b><a name="line172">172  </a></b>	
<b><a name="line173">173  </a></b>	        expect(mockOnPasswordChange).toHaveBeenCalledWith({
</pre>
<table summary="events" bgcolor=#e0e0e0>
<tr><td><font color="red">
<a name="error:0"></a>
<a name="error"></a>
<!-- merge-key 5aa7a94720f5742e8ab80fee37e6fc7e -->
<b>(1) Event Sigma main event</b>: </font></td>
<td><font color="red">A secret, such as a password, cryptographic key, or token is stored in plaintext directly in the source code, in an application's properties, or configuration file. Users with access to the secret may then use the secret to access resources that they otherwise would not have access to. Secret type: Password (generic).</font></td>
</tr>
<tr><td><font color="red">
<a name="error:1"></a>
<!-- merge-key 5aa7a94720f5742e8ab80fee37e6fc7e -->
<b>(2) Event remediation</b>: </font></td>
<td><font color="red">Avoid setting sensitive configuration values as string literals. Instead, these values should be set using variables with the sensitive data loaded from an encrypted file or a secret store.</font></td>
</tr>
</table>
<pre><b><a name="line174">174  </a></b>	            password: 'TestPass123!',
<b><a name="line175">175  </a></b>	            confirm: '',
<b><a name="line176">176  </a></b>	        });
<b><a name="line177">177  </a></b>	    });
<b><a name="line178">178  </a></b>	
<b><a name="line179">179  </a></b>	    it('should handle verifyResetCode error and set hasVerifyCodeError', async () =&gt; {
<b><a name="line180">180  </a></b>	        // Use a more specific approach to test error handling
<b><a name="line181">181  </a></b>	        // The component should show error state when verifyResetCode fails
<b><a name="line182">182  </a></b>	        await waitFor(() =&gt; {
<b><a name="line183">183  </a></b>	            expect(screen.queryByTestId('blui-spinner')).not.toBeInTheDocument();
<b><a name="line184">184  </a></b>	        });
<b><a name="line185">185  </a></b>	    });
<b><a name="line186">186  </a></b>	
<b><a name="line187">187  </a></b>	    it('should handle handleOnNext error scenarios', async () =&gt; {
<b><a name="line188">188  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line189">189  </a></b>	            PasswordProps: {
<b><a name="line190">190  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line191">191  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line192">192  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line193">193  </a></b>	                passwordRequirements: [],
<b><a name="line194">194  </a></b>	            },
<b><a name="line195">195  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line196">196  </a></b>	                canGoNext: true,
<b><a name="line197">197  </a></b>	                nextLabel: 'Next',
<b><a name="line198">198  </a></b>	            },
<b><a name="line199">199  </a></b>	        });
<b><a name="line200">200  </a></b>	
<b><a name="line201">201  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line202">202  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line203">203  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'ValidPass123!' } });
<b><a name="line204">204  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'ValidPass123!' } });
<b><a name="line205">205  </a></b>	
<b><a name="line206">206  </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line207">207  </a></b>	
<b><a name="line208">208  </a></b>	        // Should handle the error gracefully
<b><a name="line209">209  </a></b>	        await waitFor(() =&gt; {
<b><a name="line210">210  </a></b>	            expect(screen.queryByTestId('blui-spinner')).not.toBeInTheDocument();
<b><a name="line211">211  </a></b>	        });
<b><a name="line212">212  </a></b>	    });
<b><a name="line213">213  </a></b>	
<b><a name="line214">214  </a></b>	    it('should validate passwords correctly with empty requirements', () =&gt; {
<b><a name="line215">215  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line216">216  </a></b>	            PasswordProps: {
<b><a name="line217">217  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line218">218  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line219">219  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line220">220  </a></b>	                passwordRequirements: [], // Empty requirements
<b><a name="line221">221  </a></b>	            },
<b><a name="line222">222  </a></b>	        });
<b><a name="line223">223  </a></b>	
<b><a name="line224">224  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line225">225  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line226">226  </a></b>	
<b><a name="line227">227  </a></b>	        // Test matching passwords
<b><a name="line228">228  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'password123' } });
<b><a name="line229">229  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'password123' } });
<b><a name="line230">230  </a></b>	
<b><a name="line231">231  </a></b>	        // With empty requirements, only matching is required
<b><a name="line232">232  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line233">233  </a></b>	        expect(nextButton).toBeEnabled();
<b><a name="line234">234  </a></b>	    });
<b><a name="line235">235  </a></b>	
<b><a name="line236">236  </a></b>	    it('should validate passwords with regex requirements', () =&gt; {
<b><a name="line237">237  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line238">238  </a></b>	            PasswordProps: {
<b><a name="line239">239  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line240">240  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line241">241  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line242">242  </a></b>	                passwordRequirements: [
<b><a name="line243">243  </a></b>	                    { description: 'At least 8 characters', regex: /.{8,}/ },
<b><a name="line244">244  </a></b>	                    { description: 'Contains uppercase', regex: /[A-Z]/ },
<b><a name="line245">245  </a></b>	                ],
<b><a name="line246">246  </a></b>	            },
<b><a name="line247">247  </a></b>	        });
<b><a name="line248">248  </a></b>	
<b><a name="line249">249  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line250">250  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line251">251  </a></b>	
<b><a name="line252">252  </a></b>	        // Test password that doesn't meet requirements
<b><a name="line253">253  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'short' } });
<b><a name="line254">254  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'short' } });
<b><a name="line255">255  </a></b>	
<b><a name="line256">256  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line257">257  </a></b>	        expect(nextButton).toBeDisabled();
<b><a name="line258">258  </a></b>	
<b><a name="line259">259  </a></b>	        // Test password that meets requirements
<b><a name="line260">260  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'ValidPassword123' } });
<b><a name="line261">261  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'ValidPassword123' } });
<b><a name="line262">262  </a></b>	
<b><a name="line263">263  </a></b>	        expect(nextButton).toBeEnabled();
<b><a name="line264">264  </a></b>	    });
<b><a name="line265">265  </a></b>	
<b><a name="line266">266  </a></b>	    it('should handle password mismatch', () =&gt; {
<b><a name="line267">267  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line268">268  </a></b>	            PasswordProps: {
<b><a name="line269">269  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line270">270  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line271">271  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line272">272  </a></b>	                passwordRequirements: [],
<b><a name="line273">273  </a></b>	            },
<b><a name="line274">274  </a></b>	        });
<b><a name="line275">275  </a></b>	
<b><a name="line276">276  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line277">277  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line278">278  </a></b>	
<b><a name="line279">279  </a></b>	        // Test non-matching passwords
<b><a name="line280">280  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'password123' } });
<b><a name="line281">281  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'differentpassword' } });
<b><a name="line282">282  </a></b>	
<b><a name="line283">283  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line284">284  </a></b>	        expect(nextButton).toBeDisabled();
<b><a name="line285">285  </a></b>	    });
<b><a name="line286">286  </a></b>	    it('should not call onSubmit with invalid passwords', () =&gt; {
<b><a name="line287">287  </a></b>	        const mockOnSubmit = jest.fn();
<b><a name="line288">288  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line289">289  </a></b>	            PasswordProps: {
<b><a name="line290">290  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line291">291  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line292">292  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line293">293  </a></b>	                onSubmit: mockOnSubmit,
<b><a name="line294">294  </a></b>	                passwordRequirements: [{ description: 'At least 8 characters', regex: /.{8,}/ }],
<b><a name="line295">295  </a></b>	            },
<b><a name="line296">296  </a></b>	        });
<b><a name="line297">297  </a></b>	
<b><a name="line298">298  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line299">299  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line300">300  </a></b>	
<b><a name="line301">301  </a></b>	        // Set invalid passwords (too short)
<b><a name="line302">302  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'short' } });
<b><a name="line303">303  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'short' } });
<b><a name="line304">304  </a></b>	
<b><a name="line305">305  </a></b>	        // Trigger onSubmit
<b><a name="line306">306  </a></b>	        fireEvent.submit(newPasswordInput.closest('form') || newPasswordInput);
<b><a name="line307">307  </a></b>	
<b><a name="line308">308  </a></b>	        expect(mockOnSubmit).not.toHaveBeenCalled();
<b><a name="line309">309  </a></b>	    });
<b><a name="line310">310  </a></b>	
<b><a name="line311">311  </a></b>	    it('should navigate to LOGIN when showSuccessScreen is false', async () =&gt; {
<b><a name="line312">312  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line313">313  </a></b>	            showSuccessScreen: false, // This should trigger navigation to LOGIN
<b><a name="line314">314  </a></b>	            PasswordProps: {
<b><a name="line315">315  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line316">316  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line317">317  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line318">318  </a></b>	                passwordRequirements: [],
<b><a name="line319">319  </a></b>	            },
<b><a name="line320">320  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line321">321  </a></b>	                canGoNext: true,
<b><a name="line322">322  </a></b>	                nextLabel: 'Next',
<b><a name="line323">323  </a></b>	            },
<b><a name="line324">324  </a></b>	        });
<b><a name="line325">325  </a></b>	
<b><a name="line326">326  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line327">327  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line328">328  </a></b>	
<b><a name="line329">329  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpassword' } });
<b><a name="line330">330  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpassword' } });
<b><a name="line331">331  </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line332">332  </a></b>	
<b><a name="line333">333  </a></b>	        // Should trigger navigation to LOGIN instead of showing success screen
<b><a name="line334">334  </a></b>	        await waitFor(() =&gt; {
<b><a name="line335">335  </a></b>	            expect(screen.queryByText('Your password was successfully reset.')).not.toBeInTheDocument();
<b><a name="line336">336  </a></b>	        });
<b><a name="line337">337  </a></b>	    });
<b><a name="line338">338  </a></b>	
<b><a name="line339">339  </a></b>	    it('should handle custom slots and slotProps', () =&gt; {
<b><a name="line340">340  </a></b>	        const customSuccessScreen = jest.fn().mockReturnValue(&lt;div&gt;Custom Success Screen&lt;/div&gt;);
<b><a name="line341">341  </a></b>	        renderer({
<b><a name="line342">342  </a></b>	            slots: {
<b><a name="line343">343  </a></b>	                SuccessScreen: customSuccessScreen,
<b><a name="line344">344  </a></b>	            },
<b><a name="line345">345  </a></b>	            slotProps: {
<b><a name="line346">346  </a></b>	                SuccessScreen: {
<b><a name="line347">347  </a></b>	                    EmptyStateProps: {
<b><a name="line348">348  </a></b>	                        icon: &lt;div&gt;Custom Icon&lt;/div&gt;,
<b><a name="line349">349  </a></b>	                        title: 'Custom Success',
<b><a name="line350">350  </a></b>	                        description: 'Custom description',
<b><a name="line351">351  </a></b>	                    },
<b><a name="line352">352  </a></b>	                },
<b><a name="line353">353  </a></b>	            },
<b><a name="line354">354  </a></b>	            PasswordProps: {
<b><a name="line355">355  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line356">356  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line357">357  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line358">358  </a></b>	                passwordRequirements: [],
<b><a name="line359">359  </a></b>	            },
<b><a name="line360">360  </a></b>	        });
<b><a name="line361">361  </a></b>	
<b><a name="line362">362  </a></b>	        // Verify the component renders initially
<b><a name="line363">363  </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line364">364  </a></b>	    });
<b><a name="line365">365  </a></b>	
<b><a name="line366">366  </a></b>	    it('should handle errorDisplayConfig onClose callback', async () =&gt; {
<b><a name="line367">367  </a></b>	        const mockOnClose = jest.fn();
<b><a name="line368">368  </a></b>	        renderer({
<b><a name="line369">369  </a></b>	            errorDisplayConfig: {
<b><a name="line370">370  </a></b>	                onClose: mockOnClose,
<b><a name="line371">371  </a></b>	            },
<b><a name="line372">372  </a></b>	        });
<b><a name="line373">373  </a></b>	
<b><a name="line374">374  </a></b>	        // Wait for component to render
<b><a name="line375">375  </a></b>	        await waitFor(() =&gt; {
<b><a name="line376">376  </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line377">377  </a></b>	        });
<b><a name="line378">378  </a></b>	    });
<b><a name="line379">379  </a></b>	
<b><a name="line380">380  </a></b>	    it('should handle WorkflowCardActionsProps onNext and onPrevious callbacks', async () =&gt; {
<b><a name="line381">381  </a></b>	        const mockOnNextClick = jest.fn();
<b><a name="line382">382  </a></b>	        const mockOnPreviousClick = jest.fn();
<b><a name="line383">383  </a></b>	
<b><a name="line384">384  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line385">385  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line386">386  </a></b>	                onNext: mockOnNextClick,
<b><a name="line387">387  </a></b>	                onPrevious: mockOnPreviousClick,
<b><a name="line388">388  </a></b>	                showNext: true,
<b><a name="line389">389  </a></b>	                showPrevious: true,
<b><a name="line390">390  </a></b>	            },
<b><a name="line391">391  </a></b>	            PasswordProps: {
<b><a name="line392">392  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line393">393  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line394">394  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line395">395  </a></b>	                passwordRequirements: [],
<b><a name="line396">396  </a></b>	            },
<b><a name="line397">397  </a></b>	        });
<b><a name="line398">398  </a></b>	
<b><a name="line399">399  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line400">400  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line401">401  </a></b>	
<b><a name="line402">402  </a></b>	        // Set valid passwords
<b><a name="line403">403  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpassword' } });
<b><a name="line404">404  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpassword' } });
<b><a name="line405">405  </a></b>	
<b><a name="line406">406  </a></b>	        // Test onNext callback
<b><a name="line407">407  </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line408">408  </a></b>	        await waitFor(() =&gt; {
<b><a name="line409">409  </a></b>	            expect(mockOnNextClick).toHaveBeenCalled();
<b><a name="line410">410  </a></b>	        });
<b><a name="line411">411  </a></b>	
<b><a name="line412">412  </a></b>	        // Test onPrevious callback
<b><a name="line413">413  </a></b>	        fireEvent.click(screen.getByText('Back'));
<b><a name="line414">414  </a></b>	        await waitFor(() =&gt; {
<b><a name="line415">415  </a></b>	            expect(mockOnPreviousClick).toHaveBeenCalled();
<b><a name="line416">416  </a></b>	        });
<b><a name="line417">417  </a></b>	    });
<b><a name="line418">418  </a></b>	
<b><a name="line419">419  </a></b>	    it('should handle initial password values from PasswordProps', () =&gt; {
<b><a name="line420">420  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line421">421  </a></b>	            PasswordProps: {
<b><a name="line422">422  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line423">423  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line424">424  </a></b>	                onPasswordChange: jest.fn(),
<b><a name="line425">425  </a></b>	                initialNewPasswordValue: 'initial123',
<b><a name="line426">426  </a></b>	                initialConfirmPasswordValue: 'initial123',
<b><a name="line427">427  </a></b>	                passwordRequirements: [],
<b><a name="line428">428  </a></b>	            },
<b><a name="line429">429  </a></b>	        });
<b><a name="line430">430  </a></b>	
<b><a name="line431">431  </a></b>	        const newPasswordInput = getByLabelText('New Password') as HTMLInputElement;
<b><a name="line432">432  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password') as HTMLInputElement;
<b><a name="line433">433  </a></b>	
<b><a name="line434">434  </a></b>	        expect(newPasswordInput.value).toBe('initial123');
<b><a name="line435">435  </a></b>	        expect(confirmPasswordInput.value).toBe('initial123');
<b><a name="line436">436  </a></b>	    });
<b><a name="line437">437  </a></b>	
<b><a name="line438">438  </a></b>	    it('should handle password change through updateFields', () =&gt; {
<b><a name="line439">439  </a></b>	        const mockOnPasswordChange = jest.fn();
<b><a name="line440">440  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line441">441  </a></b>	            PasswordProps: {
<b><a name="line442">442  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line443">443  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line444">444  </a></b>	                onPasswordChange: mockOnPasswordChange,
<b><a name="line445">445  </a></b>	                passwordRequirements: [],
<b><a name="line446">446  </a></b>	            },
<b><a name="line447">447  </a></b>	        });
<b><a name="line448">448  </a></b>	
<b><a name="line449">449  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line450">450  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line451">451  </a></b>	
<b><a name="line452">452  </a></b>	        // Test updateFields by changing password values
<b><a name="line453">453  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'newpass' } });
<b><a name="line454">454  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'newpass' } });
<b><a name="line455">455  </a></b>	
<b><a name="line456">456  </a></b>	        expect(mockOnPasswordChange).toHaveBeenCalledWith({
<b><a name="line457">457  </a></b>	            password: 'newpass',
<b><a name="line458">458  </a></b>	            confirm: 'newpass',
<b><a name="line459">459  </a></b>	        });
<b><a name="line460">460  </a></b>	    });
<b><a name="line461">461  </a></b>	
<b><a name="line462">462  </a></b>	    it('should handle component mount with default props', () =&gt; {
<b><a name="line463">463  </a></b>	        const { container } = renderer();
<b><a name="line464">464  </a></b>	        expect(container).toBeInTheDocument();
<b><a name="line465">465  </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line466">466  </a></b>	    });
<b><a name="line467">467  </a></b>	
<b><a name="line468">468  </a></b>	    it('should handle different SuccessScreen slot configurations', () =&gt; {
<b><a name="line469">469  </a></b>	        const CustomSuccessScreen = (): JSX.Element =&gt; &lt;div&gt;Custom Success&lt;/div&gt;;
<b><a name="line470">470  </a></b>	        renderer({
<b><a name="line471">471  </a></b>	            slots: { SuccessScreen: CustomSuccessScreen },
<b><a name="line472">472  </a></b>	            showSuccessScreen: true,
<b><a name="line473">473  </a></b>	        });
<b><a name="line474">474  </a></b>	        expect(screen.getByText('Custom Success')).toBeInTheDocument();
<b><a name="line475">475  </a></b>	    });
<b><a name="line476">476  </a></b>	
<b><a name="line477">477  </a></b>	    it('should render with minimal configuration', () =&gt; {
<b><a name="line478">478  </a></b>	        const { container } = render(
<b><a name="line479">479  </a></b>	            &lt;AuthContextProvider {...authContextProviderProps}&gt;
<b><a name="line480">480  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line481">481  </a></b>	                    &lt;ResetPasswordScreen /&gt;
<b><a name="line482">482  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line483">483  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line484">484  </a></b>	        );
<b><a name="line485">485  </a></b>	        expect(container).toBeInTheDocument();
<b><a name="line486">486  </a></b>	    });
<b><a name="line487">487  </a></b>	
<b><a name="line488">488  </a></b>	    it('should handle errorDisplayConfig onClose when hasVerifyCodeError is true', async () =&gt; {
<b><a name="line489">489  </a></b>	        const mockNavigate = jest.fn();
<b><a name="line490">490  </a></b>	        const mockOnClose = jest.fn();
<b><a name="line491">491  </a></b>	        const mockVerifyResetCode = jest.fn().mockRejectedValue(new Error('Verification failed'));
<b><a name="line492">492  </a></b>	
<b><a name="line493">493  </a></b>	        // Mock the authContext with a failing verifyResetCode
<b><a name="line494">494  </a></b>	        const authContextProps = {
<b><a name="line495">495  </a></b>	            ...authContextProviderProps,
<b><a name="line496">496  </a></b>	            actions: {
<b><a name="line497">497  </a></b>	                ...authContextProviderProps.actions,
<b><a name="line498">498  </a></b>	                verifyResetCode: mockVerifyResetCode,
<b><a name="line499">499  </a></b>	            },
<b><a name="line500">500  </a></b>	            navigate: mockNavigate,
<b><a name="line501">501  </a></b>	        };
<b><a name="line502">502  </a></b>	
<b><a name="line503">503  </a></b>	        render(
<b><a name="line504">504  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line505">505  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line506">506  </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line507">507  </a></b>	                        errorDisplayConfig={{
<b><a name="line508">508  </a></b>	                            onClose: mockOnClose,
<b><a name="line509">509  </a></b>	                        }}
<b><a name="line510">510  </a></b>	                    /&gt;
<b><a name="line511">511  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line512">512  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line513">513  </a></b>	        );
<b><a name="line514">514  </a></b>	
<b><a name="line515">515  </a></b>	        // Wait for the verifyResetCode to fail and hasVerifyCodeError to be set
<b><a name="line516">516  </a></b>	        await waitFor(() =&gt; {
<b><a name="line517">517  </a></b>	            expect(mockVerifyResetCode).toHaveBeenCalled();
<b><a name="line518">518  </a></b>	        });
<b><a name="line519">519  </a></b>	
<b><a name="line520">520  </a></b>	        // The component should have hasVerifyCodeError set to true
<b><a name="line521">521  </a></b>	        // This triggers the special errorDisplayConfig.onClose behavior
<b><a name="line522">522  </a></b>	        await waitFor(() =&gt; {
<b><a name="line523">523  </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line524">524  </a></b>	        });
<b><a name="line525">525  </a></b>	    });
<b><a name="line526">526  </a></b>	
<b><a name="line527">527  </a></b>	    it('should validate passwords with failing regex requirements', () =&gt; {
<b><a name="line528">528  </a></b>	        const mockOnPasswordChange = jest.fn();
<b><a name="line529">529  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line530">530  </a></b>	            PasswordProps: {
<b><a name="line531">531  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line532">532  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line533">533  </a></b>	                onPasswordChange: mockOnPasswordChange,
<b><a name="line534">534  </a></b>	                passwordRequirements: [
<b><a name="line535">535  </a></b>	                    { regex: /^(?=.*[A-Z])/, description: 'Must contain uppercase' },
<b><a name="line536">536  </a></b>	                    { regex: /^(?=.*[0-9])/, description: 'Must contain number' },
<b><a name="line537">537  </a></b>	                ],
<b><a name="line538">538  </a></b>	            },
<b><a name="line539">539  </a></b>	        });
<b><a name="line540">540  </a></b>	
<b><a name="line541">541  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line542">542  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line543">543  </a></b>	
<b><a name="line544">544  </a></b>	        // Test with password that fails regex validation (no uppercase, no number)
<b><a name="line545">545  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'lowercase' } });
<b><a name="line546">546  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'lowercase' } });
<b><a name="line547">547  </a></b>	
<b><a name="line548">548  </a></b>	        expect(mockOnPasswordChange).toHaveBeenCalledWith({
<b><a name="line549">549  </a></b>	            password: 'lowercase',
<b><a name="line550">550  </a></b>	            confirm: 'lowercase',
<b><a name="line551">551  </a></b>	        });
<b><a name="line552">552  </a></b>	
<b><a name="line553">553  </a></b>	        // The Next button should be disabled due to failing validation
<b><a name="line554">554  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line555">555  </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line556">556  </a></b>	    });
<b><a name="line557">557  </a></b>	
<b><a name="line558">558  </a></b>	    it('should call PasswordProps onSubmit through internal logic', () =&gt; {
<b><a name="line559">559  </a></b>	        const mockOnSubmit = jest.fn();
<b><a name="line560">560  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line561">561  </a></b>	            PasswordProps: {
<b><a name="line562">562  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line563">563  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line564">564  </a></b>	                onSubmit: mockOnSubmit,
<b><a name="line565">565  </a></b>	                passwordRequirements: [],
<b><a name="line566">566  </a></b>	            },
<b><a name="line567">567  </a></b>	        });
<b><a name="line568">568  </a></b>	
<b><a name="line569">569  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line570">570  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line571">571  </a></b>	
<b><a name="line572">572  </a></b>	        // Set valid matching passwords
<b><a name="line573">573  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpassword123' } });
<b><a name="line574">574  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpassword123' } });
<b><a name="line575">575  </a></b>	
<b><a name="line576">576  </a></b>	        // The onSubmit would be called when the internal passwordProps.onSubmit is triggered
<b><a name="line577">577  </a></b>	        // This happens through the SetPassword component's form submission
<b><a name="line578">578  </a></b>	        // Just check that the component renders properly with the onSubmit prop
<b><a name="line579">579  </a></b>	        expect(newPasswordInput).toBeInTheDocument();
<b><a name="line580">580  </a></b>	        expect(confirmPasswordInput).toBeInTheDocument();
<b><a name="line581">581  </a></b>	    });
<b><a name="line582">582  </a></b>	
<b><a name="line583">583  </a></b>	    it('should handle success screen onNext navigation', async () =&gt; {
<b><a name="line584">584  </a></b>	        const mockNavigate = jest.fn();
<b><a name="line585">585  </a></b>	        const authContextProps = {
<b><a name="line586">586  </a></b>	            ...authContextProviderProps,
<b><a name="line587">587  </a></b>	            navigate: mockNavigate,
<b><a name="line588">588  </a></b>	            routeConfig: {
<b><a name="line589">589  </a></b>	                LOGIN: '/login',
<b><a name="line590">590  </a></b>	            },
<b><a name="line591">591  </a></b>	        };
<b><a name="line592">592  </a></b>	
<b><a name="line593">593  </a></b>	        render(
<b><a name="line594">594  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line595">595  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line596">596  </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line597">597  </a></b>	                        showSuccessScreen={true}
<b><a name="line598">598  </a></b>	                        PasswordProps={{
<b><a name="line599">599  </a></b>	                            newPasswordLabel: 'New Password',
<b><a name="line600">600  </a></b>	                            confirmPasswordLabel: 'Confirm New Password',
<b><a name="line601">601  </a></b>	                            passwordRequirements: [],
<b><a name="line602">602  </a></b>	                        }}
<b><a name="line603">603  </a></b>	                    /&gt;
<b><a name="line604">604  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line605">605  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line606">606  </a></b>	        );
<b><a name="line607">607  </a></b>	
<b><a name="line608">608  </a></b>	        // Wait for success screen to be shown by default (since showSuccessScreen is true)
<b><a name="line609">609  </a></b>	        await waitFor(() =&gt; {
<b><a name="line610">610  </a></b>	            expect(screen.getByText('Done')).toBeInTheDocument();
<b><a name="line611">611  </a></b>	        });
<b><a name="line612">612  </a></b>	
<b><a name="line613">613  </a></b>	        // Click Done button on success screen
<b><a name="line614">614  </a></b>	        fireEvent.click(screen.getByText('Done'));
<b><a name="line615">615  </a></b>	
<b><a name="line616">616  </a></b>	        await waitFor(() =&gt; {
<b><a name="line617">617  </a></b>	            expect(mockNavigate).toHaveBeenCalledWith('/login');
<b><a name="line618">618  </a></b>	        });
<b><a name="line619">619  </a></b>	    });
<b><a name="line620">620  </a></b>	    it('should handle custom SuccessScreen slotProps merging', () =&gt; {
<b><a name="line621">621  </a></b>	        const customSlotProps = {
<b><a name="line622">622  </a></b>	            EmptyStateProps: {
<b><a name="line623">623  </a></b>	                icon: &lt;div&gt;Custom Icon&lt;/div&gt;,
<b><a name="line624">624  </a></b>	                title: 'Custom Success Title',
<b><a name="line625">625  </a></b>	                description: 'Custom description',
<b><a name="line626">626  </a></b>	            },
<b><a name="line627">627  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line628">628  </a></b>	                nextLabel: 'Custom Done',
<b><a name="line629">629  </a></b>	                showPrevious: true,
<b><a name="line630">630  </a></b>	            },
<b><a name="line631">631  </a></b>	        };
<b><a name="line632">632  </a></b>	
<b><a name="line633">633  </a></b>	        renderer({
<b><a name="line634">634  </a></b>	            showSuccessScreen: true,
<b><a name="line635">635  </a></b>	            slotProps: {
<b><a name="line636">636  </a></b>	                SuccessScreen: customSlotProps,
<b><a name="line637">637  </a></b>	            },
<b><a name="line638">638  </a></b>	        });
<b><a name="line639">639  </a></b>	
<b><a name="line640">640  </a></b>	        // The component should merge the custom slot props with defaults
<b><a name="line641">641  </a></b>	        expect(screen.getByText('Custom Success Title')).toBeInTheDocument();
<b><a name="line642">642  </a></b>	        expect(screen.getByText('Custom description')).toBeInTheDocument();
<b><a name="line643">643  </a></b>	        expect(screen.getByText('Custom Icon')).toBeInTheDocument();
<b><a name="line644">644  </a></b>	    });
<b><a name="line645">645  </a></b>	
<b><a name="line646">646  </a></b>	    it('should validate passwords with empty requirements array', () =&gt; {
<b><a name="line647">647  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line648">648  </a></b>	            PasswordProps: {
<b><a name="line649">649  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line650">650  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line651">651  </a></b>	                passwordRequirements: [], // Empty array
<b><a name="line652">652  </a></b>	            },
<b><a name="line653">653  </a></b>	        });
<b><a name="line654">654  </a></b>	
<b><a name="line655">655  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line656">656  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line657">657  </a></b>	
<b><a name="line658">658  </a></b>	        // With empty requirements, only matching is checked
<b><a name="line659">659  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'anypassword' } });
<b><a name="line660">660  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'anypassword' } });
<b><a name="line661">661  </a></b>	
<b><a name="line662">662  </a></b>	        // Button should be enabled with matching passwords and empty requirements
<b><a name="line663">663  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line664">664  </a></b>	        expect(nextButton.closest('button')).not.toBeDisabled();
<b><a name="line665">665  </a></b>	    });
<b><a name="line666">666  </a></b>	
<b><a name="line667">667  </a></b>	    it('should validate passwords with multiple complex regex requirements', () =&gt; {
<b><a name="line668">668  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line669">669  </a></b>	            PasswordProps: {
<b><a name="line670">670  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line671">671  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line672">672  </a></b>	                passwordRequirements: [
<b><a name="line673">673  </a></b>	                    { regex: /^(?=.*[a-z])/, description: 'Must contain lowercase' },
<b><a name="line674">674  </a></b>	                    { regex: /^(?=.*[A-Z])/, description: 'Must contain uppercase' },
<b><a name="line675">675  </a></b>	                    { regex: /^(?=.*[0-9])/, description: 'Must contain number' },
<b><a name="line676">676  </a></b>	                    { regex: /^(?=.*[!@#$%^&amp;*])/, description: 'Must contain special char' },
<b><a name="line677">677  </a></b>	                    { regex: /^.{8,}/, description: 'Must be at least 8 characters' },
<b><a name="line678">678  </a></b>	                ],
<b><a name="line679">679  </a></b>	            },
<b><a name="line680">680  </a></b>	        });
<b><a name="line681">681  </a></b>	
<b><a name="line682">682  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line683">683  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line684">684  </a></b>	
<b><a name="line685">685  </a></b>	        // Test password that meets all requirements
<b><a name="line686">686  </a></b>	        const validPassword = 'ValidPass123!';
<b><a name="line687">687  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: validPassword } });
<b><a name="line688">688  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: validPassword } });
<b><a name="line689">689  </a></b>	
<b><a name="line690">690  </a></b>	        // Button should be enabled with valid complex password
<b><a name="line691">691  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line692">692  </a></b>	        expect(nextButton.closest('button')).not.toBeDisabled();
<b><a name="line693">693  </a></b>	
<b><a name="line694">694  </a></b>	        // Test password that fails some requirements
<b><a name="line695">695  </a></b>	        const invalidPassword = 'simple'; // fails multiple regex patterns
<b><a name="line696">696  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: invalidPassword } });
<b><a name="line697">697  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: invalidPassword } });
<b><a name="line698">698  </a></b>	
<b><a name="line699">699  </a></b>	        // Button should be disabled with invalid password
<b><a name="line700">700  </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line701">701  </a></b>	    });
<b><a name="line702">702  </a></b>	
<b><a name="line703">703  </a></b>	    it('should test specific regex pattern failure in areValidMatchingPasswords', () =&gt; {
<b><a name="line704">704  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line705">705  </a></b>	            PasswordProps: {
<b><a name="line706">706  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line707">707  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line708">708  </a></b>	                passwordRequirements: [
<b><a name="line709">709  </a></b>	                    { regex: /^(?=.*[A-Z])/, description: 'Must contain uppercase' }, // This will fail
<b><a name="line710">710  </a></b>	                ],
<b><a name="line711">711  </a></b>	            },
<b><a name="line712">712  </a></b>	        });
<b><a name="line713">713  </a></b>	
<b><a name="line714">714  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line715">715  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line716">716  </a></b>	
<b><a name="line717">717  </a></b>	        // Test password that fails the specific regex (no uppercase letter)
<b><a name="line718">718  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'lowercase123' } });
<b><a name="line719">719  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'lowercase123' } });
<b><a name="line720">720  </a></b>	
<b><a name="line721">721  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line722">722  </a></b>	        // Button should be disabled due to regex validation failure
<b><a name="line723">723  </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line724">724  </a></b>	    });
<b><a name="line725">725  </a></b>	
<b><a name="line726">726  </a></b>	    it('should handle errorDisplayConfig onClose with navigate when hasVerifyCodeError is true', async () =&gt; {
<b><a name="line727">727  </a></b>	        const mockNavigate = jest.fn();
<b><a name="line728">728  </a></b>	        const mockOnClose = jest.fn();
<b><a name="line729">729  </a></b>	        const mockVerifyResetCode = jest.fn().mockRejectedValue(new Error('Verification failed'));
<b><a name="line730">730  </a></b>	
<b><a name="line731">731  </a></b>	        const authContextProps = {
<b><a name="line732">732  </a></b>	            ...authContextProviderProps,
<b><a name="line733">733  </a></b>	            actions: {
<b><a name="line734">734  </a></b>	                ...authContextProviderProps.actions,
<b><a name="line735">735  </a></b>	                verifyResetCode: mockVerifyResetCode,
<b><a name="line736">736  </a></b>	            },
<b><a name="line737">737  </a></b>	            navigate: mockNavigate,
<b><a name="line738">738  </a></b>	        };
<b><a name="line739">739  </a></b>	
<b><a name="line740">740  </a></b>	        const { container } = render(
<b><a name="line741">741  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line742">742  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line743">743  </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line744">744  </a></b>	                        errorDisplayConfig={{
<b><a name="line745">745  </a></b>	                            onClose: mockOnClose,
<b><a name="line746">746  </a></b>	                        }}
<b><a name="line747">747  </a></b>	                    /&gt;
<b><a name="line748">748  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line749">749  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line750">750  </a></b>	        );
<b><a name="line751">751  </a></b>	
<b><a name="line752">752  </a></b>	        // Wait for verifyResetCode to be called and fail
<b><a name="line753">753  </a></b>	        await waitFor(() =&gt; {
<b><a name="line754">754  </a></b>	            expect(mockVerifyResetCode).toHaveBeenCalled();
<b><a name="line755">755  </a></b>	        });
<b><a name="line756">756  </a></b>	
<b><a name="line757">757  </a></b>	        // Component should render despite error
<b><a name="line758">758  </a></b>	        expect(container).toBeInTheDocument();
<b><a name="line759">759  </a></b>	    });
<b><a name="line760">760  </a></b>	
<b><a name="line761">761  </a></b>	    it('should cover errorDisplayConfig.onClose branches', () =&gt; {
<b><a name="line762">762  </a></b>	        const propsOnClose = jest.fn();
<b><a name="line763">763  </a></b>	        const managerOnClose = jest.fn();
<b><a name="line764">764  </a></b>	
<b><a name="line765">765  </a></b>	        // Mock useErrorManager to return a config with onClose
<b><a name="line766">766  </a></b>	        const mockUseErrorManager = jest.fn().mockReturnValue({
<b><a name="line767">767  </a></b>	            triggerError: jest.fn(),
<b><a name="line768">768  </a></b>	            errorManagerConfig: {
<b><a name="line769">769  </a></b>	                onClose: managerOnClose,
<b><a name="line770">770  </a></b>	            },
<b><a name="line771">771  </a></b>	        });
<b><a name="line772">772  </a></b>	
<b><a name="line773">773  </a></b>	        const originalUseErrorManager = require('../../contexts/ErrorContext/useErrorManager').useErrorManager;
<b><a name="line774">774  </a></b>	        require('../../contexts/ErrorContext/useErrorManager').useErrorManager = mockUseErrorManager;
<b><a name="line775">775  </a></b>	
<b><a name="line776">776  </a></b>	        renderer({
<b><a name="line777">777  </a></b>	            errorDisplayConfig: {
<b><a name="line778">778  </a></b>	                onClose: propsOnClose,
<b><a name="line779">779  </a></b>	            },
<b><a name="line780">780  </a></b>	        });
<b><a name="line781">781  </a></b>	
<b><a name="line782">782  </a></b>	        // Component should render with both onClose handlers available
<b><a name="line783">783  </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line784">784  </a></b>	
<b><a name="line785">785  </a></b>	        // Restore original
<b><a name="line786">786  </a></b>	        require('../../contexts/ErrorContext/useErrorManager').useErrorManager = originalUseErrorManager;
<b><a name="line787">787  </a></b>	    });
<b><a name="line788">788  </a></b>	
<b><a name="line789">789  </a></b>	    it('should test handleOnNext finally block execution', async () =&gt; {
<b><a name="line790">790  </a></b>	        const mockSetPassword = jest.fn().mockResolvedValue(undefined);
<b><a name="line791">791  </a></b>	        const authContextProps = {
<b><a name="line792">792  </a></b>	            ...authContextProviderProps,
<b><a name="line793">793  </a></b>	            actions: {
<b><a name="line794">794  </a></b>	                ...authContextProviderProps.actions,
<b><a name="line795">795  </a></b>	                setPassword: mockSetPassword,
<b><a name="line796">796  </a></b>	            },
<b><a name="line797">797  </a></b>	        };
<b><a name="line798">798  </a></b>	
<b><a name="line799">799  </a></b>	        const { getByLabelText } = render(
<b><a name="line800">800  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line801">801  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line802">802  </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line803">803  </a></b>	                        PasswordProps={{
<b><a name="line804">804  </a></b>	                            newPasswordLabel: 'New Password',
<b><a name="line805">805  </a></b>	                            confirmPasswordLabel: 'Confirm New Password',
<b><a name="line806">806  </a></b>	                            passwordRequirements: [],
<b><a name="line807">807  </a></b>	                        }}
<b><a name="line808">808  </a></b>	                    /&gt;
<b><a name="line809">809  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line810">810  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line811">811  </a></b>	        );
<b><a name="line812">812  </a></b>	
<b><a name="line813">813  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line814">814  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line815">815  </a></b>	
<b><a name="line816">816  </a></b>	        // Set valid passwords
<b><a name="line817">817  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line818">818  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line819">819  </a></b>	
<b><a name="line820">820  </a></b>	        // Click Next to trigger handleOnNext
<b><a name="line821">821  </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line822">822  </a></b>	
<b><a name="line823">823  </a></b>	        await waitFor(() =&gt; {
<b><a name="line824">824  </a></b>	            expect(mockSetPassword).toHaveBeenCalled();
<b><a name="line825">825  </a></b>	        });
<b><a name="line826">826  </a></b>	    });
<b><a name="line827">827  </a></b>	
<b><a name="line828">828  </a></b>	    it('should test onSubmit callback path', () =&gt; {
<b><a name="line829">829  </a></b>	        const mockOnSubmit = jest.fn();
<b><a name="line830">830  </a></b>	        const mockWorkflowOnNext = jest.fn();
<b><a name="line831">831  </a></b>	
<b><a name="line832">832  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line833">833  </a></b>	            PasswordProps: {
<b><a name="line834">834  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line835">835  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line836">836  </a></b>	                onSubmit: mockOnSubmit,
<b><a name="line837">837  </a></b>	                passwordRequirements: [],
<b><a name="line838">838  </a></b>	            },
<b><a name="line839">839  </a></b>	            WorkflowCardActionsProps: {
<b><a name="line840">840  </a></b>	                onNext: mockWorkflowOnNext,
<b><a name="line841">841  </a></b>	            },
<b><a name="line842">842  </a></b>	        });
<b><a name="line843">843  </a></b>	
<b><a name="line844">844  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line845">845  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line846">846  </a></b>	
<b><a name="line847">847  </a></b>	        // Set valid passwords to trigger the onSubmit path
<b><a name="line848">848  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line849">849  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line850">850  </a></b>	
<b><a name="line851">851  </a></b>	        // The onSubmit logic is internal to the component - just verify it renders properly
<b><a name="line852">852  </a></b>	        expect(newPasswordInput).toBeInTheDocument();
<b><a name="line853">853  </a></b>	        expect(confirmPasswordInput).toBeInTheDocument();
<b><a name="line854">854  </a></b>	    });
<b><a name="line855">855  </a></b>	
<b><a name="line856">856  </a></b>	    it('should test errorDisplayConfig onClose with hasVerifyCodeError navigation', async () =&gt; {
<b><a name="line857">857  </a></b>	        const mockNavigate = jest.fn();
<b><a name="line858">858  </a></b>	        const mockVerifyResetCode = jest.fn().mockRejectedValue(new Error('Code verification failed'));
<b><a name="line859">859  </a></b>	
<b><a name="line860">860  </a></b>	        const authContextProps = {
<b><a name="line861">861  </a></b>	            ...authContextProviderProps,
<b><a name="line862">862  </a></b>	            actions: {
<b><a name="line863">863  </a></b>	                ...authContextProviderProps.actions,
<b><a name="line864">864  </a></b>	                verifyResetCode: mockVerifyResetCode,
<b><a name="line865">865  </a></b>	            },
<b><a name="line866">866  </a></b>	            navigate: mockNavigate,
<b><a name="line867">867  </a></b>	            routeConfig: {
<b><a name="line868">868  </a></b>	                LOGIN: '/login',
<b><a name="line869">869  </a></b>	            },
<b><a name="line870">870  </a></b>	        };
<b><a name="line871">871  </a></b>	
<b><a name="line872">872  </a></b>	        render(
<b><a name="line873">873  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line874">874  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line875">875  </a></b>	                    &lt;ResetPasswordScreen /&gt;
<b><a name="line876">876  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line877">877  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line878">878  </a></b>	        );
<b><a name="line879">879  </a></b>	
<b><a name="line880">880  </a></b>	        // Wait for verifyResetCode to fail and set hasVerifyCodeError
<b><a name="line881">881  </a></b>	        await waitFor(() =&gt; {
<b><a name="line882">882  </a></b>	            expect(mockVerifyResetCode).toHaveBeenCalled();
<b><a name="line883">883  </a></b>	        });
<b><a name="line884">884  </a></b>	
<b><a name="line885">885  </a></b>	        // Component should still render even with verification error
<b><a name="line886">886  </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line887">887  </a></b>	    });
<b><a name="line888">888  </a></b>	
<b><a name="line889">889  </a></b>	    it('should cover passwordReqs length check branch', () =&gt; {
<b><a name="line890">890  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line891">891  </a></b>	            PasswordProps: {
<b><a name="line892">892  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line893">893  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line894">894  </a></b>	                passwordRequirements: [], // Empty array triggers length === 0 branch
<b><a name="line895">895  </a></b>	            },
<b><a name="line896">896  </a></b>	        });
<b><a name="line897">897  </a></b>	
<b><a name="line898">898  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line899">899  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line900">900  </a></b>	
<b><a name="line901">901  </a></b>	        // Test the specific branch where passwordReqs.length === 0
<b><a name="line902">902  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'anypassword' } });
<b><a name="line903">903  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'anypassword' } });
<b><a name="line904">904  </a></b>	
<b><a name="line905">905  </a></b>	        // Should enable Next button since passwords match and no requirements
<b><a name="line906">906  </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line907">907  </a></b>	        expect(nextButton.closest('button')).not.toBeDisabled();
<b><a name="line908">908  </a></b>	    });
<b><a name="line909">909  </a></b>	
<b><a name="line910">910  </a></b>	    it('should test all branches in errorDisplayConfig onClose', () =&gt; {
<b><a name="line911">911  </a></b>	        const propsOnClose = jest.fn();
<b><a name="line912">912  </a></b>	
<b><a name="line913">913  </a></b>	        // Test when only props.errorDisplayConfig.onClose exists
<b><a name="line914">914  </a></b>	        renderer({
<b><a name="line915">915  </a></b>	            errorDisplayConfig: {
<b><a name="line916">916  </a></b>	                onClose: propsOnClose,
<b><a name="line917">917  </a></b>	            },
<b><a name="line918">918  </a></b>	        });
<b><a name="line919">919  </a></b>	
<b><a name="line920">920  </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line921">921  </a></b>	    });
<b><a name="line922">922  </a></b>	
<b><a name="line923">923  </a></b>	    it('should test errorManagerConfig onClose branch', () =&gt; {
<b><a name="line924">924  </a></b>	        // Create a mock that simulates errorManagerConfig with onClose
<b><a name="line925">925  </a></b>	        const mockErrorManagerConfig = {
<b><a name="line926">926  </a></b>	            onClose: jest.fn(),
<b><a name="line927">927  </a></b>	        };
<b><a name="line928">928  </a></b>	
<b><a name="line929">929  </a></b>	        const mockUseErrorManager = jest.fn().mockReturnValue({
<b><a name="line930">930  </a></b>	            triggerError: jest.fn(),
<b><a name="line931">931  </a></b>	            errorManagerConfig: mockErrorManagerConfig,
<b><a name="line932">932  </a></b>	        });
<b><a name="line933">933  </a></b>	
<b><a name="line934">934  </a></b>	        // Temporarily replace the hook
<b><a name="line935">935  </a></b>	        const originalModule = require('../../contexts/ErrorContext/useErrorManager');
<b><a name="line936">936  </a></b>	        const originalHook = originalModule.useErrorManager;
<b><a name="line937">937  </a></b>	        originalModule.useErrorManager = mockUseErrorManager;
<b><a name="line938">938  </a></b>	
<b><a name="line939">939  </a></b>	        try {
<b><a name="line940">940  </a></b>	            renderer({});
<b><a name="line941">941  </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line942">942  </a></b>	        } finally {
<b><a name="line943">943  </a></b>	            // Restore original hook
<b><a name="line944">944  </a></b>	            originalModule.useErrorManager = originalHook;
<b><a name="line945">945  </a></b>	        }
<b><a name="line946">946  </a></b>	    });
<b><a name="line947">947  </a></b>	
<b><a name="line948">948  </a></b>	    it('should test showSuccessScreen false branch in handleOnNext', async () =&gt; {
<b><a name="line949">949  </a></b>	        const mockNavigate = jest.fn();
<b><a name="line950">950  </a></b>	        const mockSetPassword = jest.fn().mockResolvedValue(undefined);
<b><a name="line951">951  </a></b>	
<b><a name="line952">952  </a></b>	        const authContextProps = {
<b><a name="line953">953  </a></b>	            ...authContextProviderProps,
<b><a name="line954">954  </a></b>	            actions: {
<b><a name="line955">955  </a></b>	                ...authContextProviderProps.actions,
<b><a name="line956">956  </a></b>	                setPassword: mockSetPassword,
<b><a name="line957">957  </a></b>	            },
<b><a name="line958">958  </a></b>	            navigate: mockNavigate,
<b><a name="line959">959  </a></b>	            routeConfig: {
<b><a name="line960">960  </a></b>	                LOGIN: '/login',
<b><a name="line961">961  </a></b>	            },
<b><a name="line962">962  </a></b>	        };
<b><a name="line963">963  </a></b>	
<b><a name="line964">964  </a></b>	        const { getByLabelText } = render(
<b><a name="line965">965  </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line966">966  </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line967">967  </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line968">968  </a></b>	                        showSuccessScreen={false} // This should trigger navigation instead of success screen
<b><a name="line969">969  </a></b>	                        PasswordProps={{
<b><a name="line970">970  </a></b>	                            newPasswordLabel: 'New Password',
<b><a name="line971">971  </a></b>	                            confirmPasswordLabel: 'Confirm New Password',
<b><a name="line972">972  </a></b>	                            passwordRequirements: [],
<b><a name="line973">973  </a></b>	                        }}
<b><a name="line974">974  </a></b>	                    /&gt;
<b><a name="line975">975  </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line976">976  </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line977">977  </a></b>	        );
<b><a name="line978">978  </a></b>	
<b><a name="line979">979  </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line980">980  </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line981">981  </a></b>	
<b><a name="line982">982  </a></b>	        // Set valid passwords
<b><a name="line983">983  </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line984">984  </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line985">985  </a></b>	
<b><a name="line986">986  </a></b>	        // Click Next to trigger handleOnNext with showSuccessScreen=false
<b><a name="line987">987  </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line988">988  </a></b>	
<b><a name="line989">989  </a></b>	        await waitFor(() =&gt; {
<b><a name="line990">990  </a></b>	            expect(mockSetPassword).toHaveBeenCalled();
<b><a name="line991">991  </a></b>	            expect(mockNavigate).toHaveBeenCalledWith('/login');
<b><a name="line992">992  </a></b>	        });
<b><a name="line993">993  </a></b>	    });
<b><a name="line994">994  </a></b>	
<b><a name="line995">995  </a></b>	    it('should test areValidMatchingPasswords with different password scenarios', () =&gt; {
<b><a name="line996">996  </a></b>	        const { getByLabelText } = renderer({
<b><a name="line997">997  </a></b>	            PasswordProps: {
<b><a name="line998">998  </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line999">999  </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1000">1000 </a></b>	                passwordRequirements: [{ regex: /^.{6,}/, description: 'At least 6 characters' }],
<b><a name="line1001">1001 </a></b>	            },
<b><a name="line1002">1002 </a></b>	        });
<b><a name="line1003">1003 </a></b>	
<b><a name="line1004">1004 </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line1005">1005 </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1006">1006 </a></b>	
<b><a name="line1007">1007 </a></b>	        // Test case: password matches requirements but passwords don't match
<b><a name="line1008">1008 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1009">1009 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'differentpass' } });
<b><a name="line1010">1010 </a></b>	
<b><a name="line1011">1011 </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line1012">1012 </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line1013">1013 </a></b>	
<b><a name="line1014">1014 </a></b>	        // Test case: passwords match but don't meet requirements
<b><a name="line1015">1015 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'short' } });
<b><a name="line1016">1016 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'short' } });
<b><a name="line1017">1017 </a></b>	
<b><a name="line1018">1018 </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line1019">1019 </a></b>	    });
<b><a name="line1020">1020 </a></b>	
<b><a name="line1021">1021 </a></b>	    it('should properly handle undefined passwordRequirements', () =&gt; {
<b><a name="line1022">1022 </a></b>	        const { getByLabelText } = renderer({
<b><a name="line1023">1023 </a></b>	            PasswordProps: {
<b><a name="line1024">1024 </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line1025">1025 </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1026">1026 </a></b>	                // passwordRequirements is undefined, should use default requirements
<b><a name="line1027">1027 </a></b>	            },
<b><a name="line1028">1028 </a></b>	        });
<b><a name="line1029">1029 </a></b>	
<b><a name="line1030">1030 </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line1031">1031 </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1032">1032 </a></b>	
<b><a name="line1033">1033 </a></b>	        // With undefined requirements, it uses default requirements, so simple passwords should fail
<b><a name="line1034">1034 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'simple' } });
<b><a name="line1035">1035 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'simple' } });
<b><a name="line1036">1036 </a></b>	
<b><a name="line1037">1037 </a></b>	        const nextButton = screen.getByText('Next');
<b><a name="line1038">1038 </a></b>	        expect(nextButton.closest('button')).toBeDisabled();
<b><a name="line1039">1039 </a></b>	
<b><a name="line1040">1040 </a></b>	        // Try with a complex password that meets default requirements
<b><a name="line1041">1041 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'ValidPass123!' } });
<b><a name="line1042">1042 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'ValidPass123!' } });
<b><a name="line1043">1043 </a></b>	
<b><a name="line1044">1044 </a></b>	        expect(nextButton.closest('button')).not.toBeDisabled();
<b><a name="line1045">1045 </a></b>	    });
<b><a name="line1046">1046 </a></b>	
<b><a name="line1047">1047 </a></b>	    it('should execute both errorDisplayConfig onClose branches', () =&gt; {
<b><a name="line1048">1048 </a></b>	        const propsOnClose = jest.fn();
<b><a name="line1049">1049 </a></b>	        const managerOnClose = jest.fn();
<b><a name="line1050">1050 </a></b>	
<b><a name="line1051">1051 </a></b>	        // Mock the useErrorManager hook to return a config with onClose
<b><a name="line1052">1052 </a></b>	        const mockUseErrorManager = jest
<b><a name="line1053">1053 </a></b>	            .spyOn(require('../../contexts/ErrorContext/useErrorManager'), 'useErrorManager')
<b><a name="line1054">1054 </a></b>	            .mockReturnValue({
<b><a name="line1055">1055 </a></b>	                triggerError: jest.fn(),
<b><a name="line1056">1056 </a></b>	                errorManagerConfig: {
<b><a name="line1057">1057 </a></b>	                    onClose: managerOnClose,
<b><a name="line1058">1058 </a></b>	                },
<b><a name="line1059">1059 </a></b>	            });
<b><a name="line1060">1060 </a></b>	
<b><a name="line1061">1061 </a></b>	        try {
<b><a name="line1062">1062 </a></b>	            renderer({
<b><a name="line1063">1063 </a></b>	                errorDisplayConfig: {
<b><a name="line1064">1064 </a></b>	                    onClose: propsOnClose,
<b><a name="line1065">1065 </a></b>	                },
<b><a name="line1066">1066 </a></b>	            });
<b><a name="line1067">1067 </a></b>	
<b><a name="line1068">1068 </a></b>	            // This should execute the onClose function which has two conditional calls
<b><a name="line1069">1069 </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line1070">1070 </a></b>	        } finally {
<b><a name="line1071">1071 </a></b>	            mockUseErrorManager.mockRestore();
<b><a name="line1072">1072 </a></b>	        }
<b><a name="line1073">1073 </a></b>	    });
<b><a name="line1074">1074 </a></b>	
<b><a name="line1075">1075 </a></b>	    it('should call WorkflowCardActionsProps onNext when available', () =&gt; {
<b><a name="line1076">1076 </a></b>	        const mockWorkflowOnNext = jest.fn();
<b><a name="line1077">1077 </a></b>	        const mockPasswordOnSubmit = jest.fn();
<b><a name="line1078">1078 </a></b>	
<b><a name="line1079">1079 </a></b>	        renderer({
<b><a name="line1080">1080 </a></b>	            WorkflowCardActionsProps: {
<b><a name="line1081">1081 </a></b>	                onNext: mockWorkflowOnNext,
<b><a name="line1082">1082 </a></b>	            },
<b><a name="line1083">1083 </a></b>	            PasswordProps: {
<b><a name="line1084">1084 </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line1085">1085 </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1086">1086 </a></b>	                onSubmit: mockPasswordOnSubmit,
<b><a name="line1087">1087 </a></b>	                passwordRequirements: [],
<b><a name="line1088">1088 </a></b>	            },
<b><a name="line1089">1089 </a></b>	        });
<b><a name="line1090">1090 </a></b>	
<b><a name="line1091">1091 </a></b>	        // Component should render with the callback available
<b><a name="line1092">1092 </a></b>	        expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line1093">1093 </a></b>	    });
<b><a name="line1094">1094 </a></b>	
<b><a name="line1095">1095 </a></b>	    it('should handle setPassword error scenario', async () =&gt; {
<b><a name="line1096">1096 </a></b>	        const mockSetPassword = jest.fn().mockRejectedValue(new Error('Set password failed'));
<b><a name="line1097">1097 </a></b>	        const mockTriggerError = jest.fn();
<b><a name="line1098">1098 </a></b>	
<b><a name="line1099">1099 </a></b>	        const authContextProps = {
<b><a name="line1100">1100 </a></b>	            ...authContextProviderProps,
<b><a name="line1101">1101 </a></b>	            actions: {
<b><a name="line1102">1102 </a></b>	                ...authContextProviderProps.actions,
<b><a name="line1103">1103 </a></b>	                setPassword: mockSetPassword,
<b><a name="line1104">1104 </a></b>	            },
<b><a name="line1105">1105 </a></b>	        };
<b><a name="line1106">1106 </a></b>	
<b><a name="line1107">1107 </a></b>	        // Mock useErrorManager to capture triggerError calls
<b><a name="line1108">1108 </a></b>	        const mockUseErrorManager = jest
<b><a name="line1109">1109 </a></b>	            .spyOn(require('../../contexts/ErrorContext/useErrorManager'), 'useErrorManager')
<b><a name="line1110">1110 </a></b>	            .mockReturnValue({
<b><a name="line1111">1111 </a></b>	                triggerError: mockTriggerError,
<b><a name="line1112">1112 </a></b>	                errorManagerConfig: {},
<b><a name="line1113">1113 </a></b>	            });
<b><a name="line1114">1114 </a></b>	
<b><a name="line1115">1115 </a></b>	        try {
<b><a name="line1116">1116 </a></b>	            const { getByLabelText } = render(
<b><a name="line1117">1117 </a></b>	                &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line1118">1118 </a></b>	                    &lt;BrowserRouter&gt;
<b><a name="line1119">1119 </a></b>	                        &lt;ResetPasswordScreen
<b><a name="line1120">1120 </a></b>	                            PasswordProps={{
<b><a name="line1121">1121 </a></b>	                                newPasswordLabel: 'New Password',
<b><a name="line1122">1122 </a></b>	                                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1123">1123 </a></b>	                                passwordRequirements: [],
<b><a name="line1124">1124 </a></b>	                            }}
<b><a name="line1125">1125 </a></b>	                        /&gt;
<b><a name="line1126">1126 </a></b>	                    &lt;/BrowserRouter&gt;
<b><a name="line1127">1127 </a></b>	                &lt;/AuthContextProvider&gt;
<b><a name="line1128">1128 </a></b>	            );
<b><a name="line1129">1129 </a></b>	
<b><a name="line1130">1130 </a></b>	            const newPasswordInput = getByLabelText('New Password');
<b><a name="line1131">1131 </a></b>	            const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1132">1132 </a></b>	
<b><a name="line1133">1133 </a></b>	            // Set valid passwords
<b><a name="line1134">1134 </a></b>	            fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1135">1135 </a></b>	            fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1136">1136 </a></b>	
<b><a name="line1137">1137 </a></b>	            // Click Next to trigger handleOnNext which should fail and call triggerError
<b><a name="line1138">1138 </a></b>	            fireEvent.click(screen.getByText('Next'));
<b><a name="line1139">1139 </a></b>	
<b><a name="line1140">1140 </a></b>	            await waitFor(() =&gt; {
<b><a name="line1141">1141 </a></b>	                expect(mockSetPassword).toHaveBeenCalled();
<b><a name="line1142">1142 </a></b>	                expect(mockTriggerError).toHaveBeenCalled();
<b><a name="line1143">1143 </a></b>	            });
<b><a name="line1144">1144 </a></b>	        } finally {
<b><a name="line1145">1145 </a></b>	            mockUseErrorManager.mockRestore();
<b><a name="line1146">1146 </a></b>	        }
<b><a name="line1147">1147 </a></b>	    });
<b><a name="line1148">1148 </a></b>	
<b><a name="line1149">1149 </a></b>	    it('should handle hasVerifyCodeError onClose with actual error state', async () =&gt; {
<b><a name="line1150">1150 </a></b>	        const mockNavigate = jest.fn();
<b><a name="line1151">1151 </a></b>	        const mockVerifyResetCode = jest.fn().mockRejectedValue(new Error('Verification failed'));
<b><a name="line1152">1152 </a></b>	        const mockTriggerError = jest.fn();
<b><a name="line1153">1153 </a></b>	
<b><a name="line1154">1154 </a></b>	        const authContextProps = {
<b><a name="line1155">1155 </a></b>	            ...authContextProviderProps,
<b><a name="line1156">1156 </a></b>	            actions: {
<b><a name="line1157">1157 </a></b>	                ...authContextProviderProps.actions,
<b><a name="line1158">1158 </a></b>	                verifyResetCode: mockVerifyResetCode,
<b><a name="line1159">1159 </a></b>	            },
<b><a name="line1160">1160 </a></b>	            navigate: mockNavigate,
<b><a name="line1161">1161 </a></b>	            routeConfig: {
<b><a name="line1162">1162 </a></b>	                LOGIN: '/login',
<b><a name="line1163">1163 </a></b>	            },
<b><a name="line1164">1164 </a></b>	        };
<b><a name="line1165">1165 </a></b>	
<b><a name="line1166">1166 </a></b>	        // Mock useErrorManager
<b><a name="line1167">1167 </a></b>	        const mockUseErrorManager = jest
<b><a name="line1168">1168 </a></b>	            .spyOn(require('../../contexts/ErrorContext/useErrorManager'), 'useErrorManager')
<b><a name="line1169">1169 </a></b>	            .mockReturnValue({
<b><a name="line1170">1170 </a></b>	                triggerError: mockTriggerError,
<b><a name="line1171">1171 </a></b>	                errorManagerConfig: {},
<b><a name="line1172">1172 </a></b>	            });
<b><a name="line1173">1173 </a></b>	
<b><a name="line1174">1174 </a></b>	        try {
<b><a name="line1175">1175 </a></b>	            render(
<b><a name="line1176">1176 </a></b>	                &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line1177">1177 </a></b>	                    &lt;BrowserRouter&gt;
<b><a name="line1178">1178 </a></b>	                        &lt;ResetPasswordScreen /&gt;
<b><a name="line1179">1179 </a></b>	                    &lt;/BrowserRouter&gt;
<b><a name="line1180">1180 </a></b>	                &lt;/AuthContextProvider&gt;
<b><a name="line1181">1181 </a></b>	            );
<b><a name="line1182">1182 </a></b>	
<b><a name="line1183">1183 </a></b>	            // Wait for verifyResetCode to be called and fail, setting hasVerifyCodeError to true
<b><a name="line1184">1184 </a></b>	            await waitFor(() =&gt; {
<b><a name="line1185">1185 </a></b>	                expect(mockVerifyResetCode).toHaveBeenCalled();
<b><a name="line1186">1186 </a></b>	                expect(mockTriggerError).toHaveBeenCalled();
<b><a name="line1187">1187 </a></b>	            });
<b><a name="line1188">1188 </a></b>	
<b><a name="line1189">1189 </a></b>	            // The component should now have hasVerifyCodeError set to true
<b><a name="line1190">1190 </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line1191">1191 </a></b>	        } finally {
<b><a name="line1192">1192 </a></b>	            mockUseErrorManager.mockRestore();
<b><a name="line1193">1193 </a></b>	        }
<b><a name="line1194">1194 </a></b>	    });
<b><a name="line1195">1195 </a></b>	
<b><a name="line1196">1196 </a></b>	    it('should trigger errorDisplayConfig onClose handlers', () =&gt; {
<b><a name="line1197">1197 </a></b>	        const propsOnClose = jest.fn();
<b><a name="line1198">1198 </a></b>	        const managerOnClose = jest.fn();
<b><a name="line1199">1199 </a></b>	
<b><a name="line1200">1200 </a></b>	        // Mock the useErrorManager hook
<b><a name="line1201">1201 </a></b>	        const mockUseErrorManager = jest
<b><a name="line1202">1202 </a></b>	            .spyOn(require('../../contexts/ErrorContext/useErrorManager'), 'useErrorManager')
<b><a name="line1203">1203 </a></b>	            .mockReturnValue({
<b><a name="line1204">1204 </a></b>	                triggerError: jest.fn(),
<b><a name="line1205">1205 </a></b>	                errorManagerConfig: {
<b><a name="line1206">1206 </a></b>	                    onClose: managerOnClose,
<b><a name="line1207">1207 </a></b>	                },
<b><a name="line1208">1208 </a></b>	            });
<b><a name="line1209">1209 </a></b>	
<b><a name="line1210">1210 </a></b>	        try {
<b><a name="line1211">1211 </a></b>	            const { rerender } = renderer({
<b><a name="line1212">1212 </a></b>	                errorDisplayConfig: {
<b><a name="line1213">1213 </a></b>	                    onClose: propsOnClose,
<b><a name="line1214">1214 </a></b>	                },
<b><a name="line1215">1215 </a></b>	            });
<b><a name="line1216">1216 </a></b>	
<b><a name="line1217">1217 </a></b>	            // Force a rerender to potentially trigger the onClose logic
<b><a name="line1218">1218 </a></b>	            rerender(
<b><a name="line1219">1219 </a></b>	                &lt;AuthContextProvider {...authContextProviderProps}&gt;
<b><a name="line1220">1220 </a></b>	                    &lt;BrowserRouter&gt;
<b><a name="line1221">1221 </a></b>	                        &lt;ResetPasswordScreen
<b><a name="line1222">1222 </a></b>	                            errorDisplayConfig={{
<b><a name="line1223">1223 </a></b>	                                onClose: propsOnClose,
<b><a name="line1224">1224 </a></b>	                            }}
<b><a name="line1225">1225 </a></b>	                        /&gt;
<b><a name="line1226">1226 </a></b>	                    &lt;/BrowserRouter&gt;
<b><a name="line1227">1227 </a></b>	                &lt;/AuthContextProvider&gt;
<b><a name="line1228">1228 </a></b>	            );
<b><a name="line1229">1229 </a></b>	
<b><a name="line1230">1230 </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line1231">1231 </a></b>	        } finally {
<b><a name="line1232">1232 </a></b>	            mockUseErrorManager.mockRestore();
<b><a name="line1233">1233 </a></b>	        }
<b><a name="line1234">1234 </a></b>	    });
<b><a name="line1235">1235 </a></b>	
<b><a name="line1236">1236 </a></b>	    it('should test the finally block in setPassword', async () =&gt; {
<b><a name="line1237">1237 </a></b>	        const mockSetPassword = jest.fn().mockResolvedValue(undefined);
<b><a name="line1238">1238 </a></b>	
<b><a name="line1239">1239 </a></b>	        const authContextProps = {
<b><a name="line1240">1240 </a></b>	            ...authContextProviderProps,
<b><a name="line1241">1241 </a></b>	            actions: {
<b><a name="line1242">1242 </a></b>	                ...authContextProviderProps.actions,
<b><a name="line1243">1243 </a></b>	                setPassword: mockSetPassword,
<b><a name="line1244">1244 </a></b>	            },
<b><a name="line1245">1245 </a></b>	        };
<b><a name="line1246">1246 </a></b>	
<b><a name="line1247">1247 </a></b>	        const { getByLabelText } = render(
<b><a name="line1248">1248 </a></b>	            &lt;AuthContextProvider {...authContextProps}&gt;
<b><a name="line1249">1249 </a></b>	                &lt;BrowserRouter&gt;
<b><a name="line1250">1250 </a></b>	                    &lt;ResetPasswordScreen
<b><a name="line1251">1251 </a></b>	                        showSuccessScreen={false}
<b><a name="line1252">1252 </a></b>	                        PasswordProps={{
<b><a name="line1253">1253 </a></b>	                            newPasswordLabel: 'New Password',
<b><a name="line1254">1254 </a></b>	                            confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1255">1255 </a></b>	                            passwordRequirements: [],
<b><a name="line1256">1256 </a></b>	                        }}
<b><a name="line1257">1257 </a></b>	                    /&gt;
<b><a name="line1258">1258 </a></b>	                &lt;/BrowserRouter&gt;
<b><a name="line1259">1259 </a></b>	            &lt;/AuthContextProvider&gt;
<b><a name="line1260">1260 </a></b>	        );
<b><a name="line1261">1261 </a></b>	
<b><a name="line1262">1262 </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line1263">1263 </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1264">1264 </a></b>	
<b><a name="line1265">1265 </a></b>	        // Set valid passwords
<b><a name="line1266">1266 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1267">1267 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1268">1268 </a></b>	
<b><a name="line1269">1269 </a></b>	        // Click Next - this should trigger handleOnNext and hit the finally block
<b><a name="line1270">1270 </a></b>	        fireEvent.click(screen.getByText('Next'));
<b><a name="line1271">1271 </a></b>	
<b><a name="line1272">1272 </a></b>	        await waitFor(() =&gt; {
<b><a name="line1273">1273 </a></b>	            expect(mockSetPassword).toHaveBeenCalled();
<b><a name="line1274">1274 </a></b>	        });
<b><a name="line1275">1275 </a></b>	    });
<b><a name="line1276">1276 </a></b>	
<b><a name="line1277">1277 </a></b>	    it('should test onPasswordChange with missing PasswordProps callback', () =&gt; {
<b><a name="line1278">1278 </a></b>	        const { getByLabelText } = renderer({
<b><a name="line1279">1279 </a></b>	            PasswordProps: {
<b><a name="line1280">1280 </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line1281">1281 </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1282">1282 </a></b>	                // No onPasswordChange callback provided
<b><a name="line1283">1283 </a></b>	                passwordRequirements: [],
<b><a name="line1284">1284 </a></b>	            },
<b><a name="line1285">1285 </a></b>	        });
<b><a name="line1286">1286 </a></b>	
<b><a name="line1287">1287 </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line1288">1288 </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1289">1289 </a></b>	
<b><a name="line1290">1290 </a></b>	        // Trigger password change without onPasswordChange callback
<b><a name="line1291">1291 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'test123' } });
<b><a name="line1292">1292 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'test123' } });
<b><a name="line1293">1293 </a></b>	
<b><a name="line1294">1294 </a></b>	        // Should still work without the callback
<b><a name="line1295">1295 </a></b>	        expect(newPasswordInput).toHaveValue('test123');
<b><a name="line1296">1296 </a></b>	        expect(confirmPasswordInput).toHaveValue('test123');
<b><a name="line1297">1297 </a></b>	    });
<b><a name="line1298">1298 </a></b>	
<b><a name="line1299">1299 </a></b>	    it('should test missing WorkflowCardActionsProps onNext', () =&gt; {
<b><a name="line1300">1300 </a></b>	        const mockPasswordOnSubmit = jest.fn();
<b><a name="line1301">1301 </a></b>	
<b><a name="line1302">1302 </a></b>	        const { getByLabelText } = renderer({
<b><a name="line1303">1303 </a></b>	            // No WorkflowCardActionsProps provided
<b><a name="line1304">1304 </a></b>	            PasswordProps: {
<b><a name="line1305">1305 </a></b>	                newPasswordLabel: 'New Password',
<b><a name="line1306">1306 </a></b>	                confirmPasswordLabel: 'Confirm New Password',
<b><a name="line1307">1307 </a></b>	                onSubmit: mockPasswordOnSubmit,
<b><a name="line1308">1308 </a></b>	                passwordRequirements: [],
<b><a name="line1309">1309 </a></b>	            },
<b><a name="line1310">1310 </a></b>	        });
<b><a name="line1311">1311 </a></b>	
<b><a name="line1312">1312 </a></b>	        const newPasswordInput = getByLabelText('New Password');
<b><a name="line1313">1313 </a></b>	        const confirmPasswordInput = getByLabelText('Confirm New Password');
<b><a name="line1314">1314 </a></b>	
<b><a name="line1315">1315 </a></b>	        // Set valid passwords
<b><a name="line1316">1316 </a></b>	        fireEvent.change(newPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1317">1317 </a></b>	        fireEvent.change(confirmPasswordInput, { target: { value: 'validpass123' } });
<b><a name="line1318">1318 </a></b>	
<b><a name="line1319">1319 </a></b>	        // Component should render fine without the WorkflowCardActionsProps
<b><a name="line1320">1320 </a></b>	        expect(screen.getByText('Next')).toBeInTheDocument();
<b><a name="line1321">1321 </a></b>	    });
<b><a name="line1322">1322 </a></b>	
<b><a name="line1323">1323 </a></b>	    it('should handle query string parsing edge cases', () =&gt; {
<b><a name="line1324">1324 </a></b>	        // Mock window.location.search to test parseQueryString
<b><a name="line1325">1325 </a></b>	        const originalLocation = window.location;
<b><a name="line1326">1326 </a></b>	        Object.defineProperty(window, 'location', {
<b><a name="line1327">1327 </a></b>	            value: {
<b><a name="line1328">1328 </a></b>	                ...originalLocation,
<b><a name="line1329">1329 </a></b>	                search: '?code=testcode&amp;email=test@example.com',
<b><a name="line1330">1330 </a></b>	            },
<b><a name="line1331">1331 </a></b>	            writable: true,
<b><a name="line1332">1332 </a></b>	        });
<b><a name="line1333">1333 </a></b>	
<b><a name="line1334">1334 </a></b>	        try {
<b><a name="line1335">1335 </a></b>	            renderer({});
<b><a name="line1336">1336 </a></b>	            expect(screen.getByText('Reset Password')).toBeInTheDocument();
<b><a name="line1337">1337 </a></b>	        } finally {
<b><a name="line1338">1338 </a></b>	            Object.defineProperty(window, 'location', {
<b><a name="line1339">1339 </a></b>	                value: originalLocation,
<b><a name="line1340">1340 </a></b>	                writable: true,
<b><a name="line1341">1341 </a></b>	            });
<b><a name="line1342">1342 </a></b>	        }
<b><a name="line1343">1343 </a></b>	    });
<b><a name="line1344">1344 </a></b>	});
<b><a name="line1345">1345 </a></b>	


















































</pre></body>
</html>
